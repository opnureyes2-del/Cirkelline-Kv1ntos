# ============================================================================
# CIRKELLINE AUTOMATED BACKUP CRON JOBS
# ============================================================================
# Installation: sudo cp cron_backup.conf /etc/cron.d/cirkelline-backup
# ============================================================================

# Variabler
SHELL=/bin/bash
PATH=/usr/local/bin:/usr/bin:/bin
AWS_REGION=eu-north-1
BACKUP_SCRIPT=/home/rasmus/Desktop/projects/cirkelline-system/aws_deployment/db_backup.sh
ROTATE_SCRIPT=/home/rasmus/Desktop/projects/cirkelline-system/aws_deployment/rotate_secrets.sh
LOG_DIR=/var/log/cirkelline

# ============================================================================
# DATABASE BACKUPS
# ============================================================================

# Daglig lokal backup kl 02:00 (efter RDS automated backup window)
0 2 * * * rasmus $BACKUP_SCRIPT --local >> $LOG_DIR/backup.log 2>&1

# Ugentlig fuld backup (snapshot + local + S3) hver sÃ¸ndag kl 03:00
0 3 * * 0 rasmus $BACKUP_SCRIPT --full >> $LOG_DIR/backup.log 2>&1

# ============================================================================
# SECRETS HEALTH CHECK
# ============================================================================

# Daglig secrets health check kl 06:00
0 6 * * * rasmus $ROTATE_SCRIPT --health >> $LOG_DIR/secrets.log 2>&1

# ============================================================================
# LOG ROTATION (opret separat logrotate config)
# ============================================================================
# /var/log/cirkelline/*.log {
#     weekly
#     rotate 12
#     compress
#     delaycompress
#     missingok
#     notifempty
# }
